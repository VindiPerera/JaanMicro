{% extends "base.html" %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-12">
        <div class="d-flex justify-content-between align-items-center">
            <h4>Reports & Analytics</h4>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6 col-lg-3 mb-4">
        <div class="card h-100">
            <div class="card-body text-center">
                <i class="bi bi-cash-coin text-primary" style="font-size: 3rem;"></i>
                <h5 class="mt-3">Loan Reports</h5>
                <p class="text-muted">View loan portfolio, outstanding amounts, and loan performance</p>
                <a href="{{ url_for('reports.loan_report') }}" class="btn btn-primary btn-sm">View Report</a>
            </div>
        </div>
    </div>
    
    <div class="col-md-6 col-lg-3 mb-4">
        <div class="card h-100">
            <div class="card-body text-center">
                <i class="bi bi-wallet2 text-success" style="font-size: 3rem;"></i>
                <h5 class="mt-3">Collection Reports</h5>
                <p class="text-muted">Daily/monthly collections, payment history, and recovery rates</p>
                <a href="{{ url_for('reports.collection_report') }}" class="btn btn-success btn-sm">View Report</a>
            </div>
        </div>
    </div>
    
    <div class="col-md-6 col-lg-3 mb-4">
        <div class="card h-100">
            <div class="card-body text-center">
                <i class="bi bi-people text-info" style="font-size: 3rem;"></i>
                <h5 class="mt-3">Member Reports</h5>
                <p class="text-muted">Member demographics, KYC status, and activity reports</p>
                <a href="{{ url_for('reports.customer_report') }}" class="btn btn-info btn-sm">View Report</a>
            </div>
        </div>
    </div>
    
    <div class="col-md-6 col-lg-3 mb-4">
        <div class="card h-100">
            <div class="card-body text-center">
                <i class="bi bi-piggy-bank text-warning" style="font-size: 3rem;"></i>
                <h5 class="mt-3">Investment Reports</h5>
                <p class="text-muted">Investment portfolio, maturity schedules, and interest calculations</p>
                <a href="{{ url_for('reports.investment_report') }}" class="btn btn-warning btn-sm">View Report</a>
            </div>
        </div>
    </div>
    
    <div class="col-md-6 col-lg-3 mb-4">
        <div class="card h-100">
            <div class="card-body text-center">
                <i class="bi bi-gem text-danger" style="font-size: 3rem;"></i>
                <h5 class="mt-3">Pawning Reports</h5>
                <p class="text-muted">Pawning portfolio, redemptions, and due dates</p>
                <a href="{{ url_for('reports.pawning_report') }}" class="btn btn-danger btn-sm">View Report</a>
            </div>
        </div>
    </div>
    
    <div class="col-md-6 col-lg-3 mb-4">
        <div class="card h-100">
            <div class="card-body text-center">
                <i class="bi bi-file-earmark-excel text-success" style="font-size: 3rem;"></i>
                <h5 class="mt-3">Export Data</h5>
                <p class="text-muted">Export reports to CSV for external analysis</p>
                <a href="{{ url_for('reports.export_loans') }}" class="btn btn-success btn-sm">Export Loans</a>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h6 class="mb-0">Quick Statistics</h6>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-3 col-6 mb-3">
                        <h3 class="text-primary">{{ "%.0f"|format(stats.total_customers|float) if stats else 0 }}</h3>
                        <p class="text-muted mb-0">Total Members</p>
                        <small class="text-success">{{ "%.0f"|format(stats.active_customers|float) if stats else 0 }} active</small>
                    </div>
                    <div class="col-md-3 col-6 mb-3">
                        <h3 class="text-success">{{ system_settings.currency_symbol }} {{ "%.0f"|format(stats.total_loan_disbursed|float) if stats else '0' }}</h3>
                        <p class="text-muted mb-0">Total Loans Disbursed</p>
                        <small class="text-info">{{ "%.0f"|format(stats.active_loans|float) if stats else 0 }} active loans</small>
                    </div>
                    <div class="col-md-3 col-6 mb-3">
                        <h3 class="text-info">{{ system_settings.currency_symbol }} {{ "%.0f"|format(stats.total_investment_amount|float) if stats else '0' }}</h3>
                        <p class="text-muted mb-0">Total Investments</p>
                        <small class="text-warning">{{ "%.0f"|format(stats.active_investments|float) if stats else 0 }} active</small>
                    </div>
                    <div class="col-md-3 col-6 mb-3">
                        <h3 class="text-warning">{{ "%.0f"|format(stats.active_pawnings|float) if stats else 0 }}</h3>
                        <p class="text-muted mb-0">Active Pawnings</p>
                        <small class="text-danger">{{ system_settings.currency_symbol }} {{ "%.0f"|format(stats.total_pawning_amount|float) if stats else '0' }}</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h6 class="mb-0">Today's Activity</h6>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-md-4 col-6 mb-3">
                        <h4 class="text-success">{{ system_settings.currency_symbol }} {{ "%.0f"|format(stats.todays_collections|float) if stats else '0' }}</h4>
                        <p class="text-muted mb-0">Collections Today</p>
                    </div>
                    <div class="col-md-4 col-6 mb-3">
                        <h4 class="text-primary">{{ "%.0f"|format(stats.todays_new_loans|float) if stats else 0 }}</h4>
                        <p class="text-muted mb-0">New Loans</p>
                    </div>
                    <div class="col-md-4 col-6 mb-3">
                        <h4 class="text-info">{{ "%.0f"|format(stats.todays_new_customers|float) if stats else 0 }}</h4>
                        <p class="text-muted mb-0">New Member</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
